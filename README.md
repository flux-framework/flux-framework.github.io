# flux-framework

Welcome to the web home of Flux Framework! Here we maintain:

- A central portal with information about active Flux Framework projects
- Automated pipelines to retrieve updated data for projects

## Usage

### Release Notes

The release notes in [_posts](_posts) are generated by the [rse-ops/releases-action](https://github.com/rse-ops/release-actions/tree/main/docs).
There are instructions there for how to use it, and if you want to run it locally.

### Data

We run a [nightly action](.github/workflows/update-data.yaml) to get updated data
for our projects, however you can generate the same data on your own using
[Contributor CI](https://contributor-ci.readthedocs.io/en/latest/getting_started/user-guide.html) as follows!

```bash
# Export a GitHub token to the environment
export GITHUB_TOKEN=xxxxxxxxxxx

# install contributor-ci
pip install contributor-ci

# check out the extractors available!
# cci list
```

The tool will read in repos from [contributor-ci.yaml](contributor-ci.yaml) (default) and we store data for cci in [_data](_data),
so to run an extractor you can do the following. Note that we want to cache data monthly so we use `--save-format year/month` instead of the
default of `year/month/day`

```bash
$ cci --out-dir _data extract --save-format year/month <extractor>
```

And the ones we do for the site (a subset) are (this is what we run in the action):

```bash
$ cci --out-dir _data extract --save-format year/month repos repo_metadata topics languages releases stars activity_commits activity_lines
```

Note that emojis and jekyll don't play nicely, so we currently don't have any in project descriptions.

### Api

The site data is also served from a set of static APIs! We do this in case you want data about Flux Framework
projects programmatically available, and as stated above, it's updated nightly.

 - `/flux-framework.github.io/api/languages.json`
 - `/flux-framework.github.io/api/releases.json`
 - `/flux-framework.github.io/api/repos.json`
 - `/flux-framework.github.io/api/repos-metadata.json`
 - `/flux-framework.github.io/api/stars.json`
 - `/flux-framework.github.io/api/topics.json`
 - `/flux-framework.github.io/api/commits.json`
 - `/flux-framework.github.io/api/lines.json`


### Custom Data

#### Avatars

If you want to define a custom avatar image for a project:

1. Add the image to [assets/img/custom/avatars](assets/img/custom/avatars)
2. Add _just the name_ to [_data/custom.yaml](_data/custom.yaml) under avatars.

#### Release

SPDX-License-Identifier: LGPL-3.0

LLNL-CODE-764420

iconv -c -f utf8 -t ascii  _data/data/latest/cci-repo_metadata.json > _data/data/latest/cci-repo_metadata.json

